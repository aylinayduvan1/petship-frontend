<!--TOOLBAR-->
<div class="card">
  <p-toast></p-toast>
  <p-toolbar styleClass="mb-4 gap-2">
    <ng-template pTemplate="left">
        <button  (click)="openModalAdd()" pButton pRipple label="İlan Ekle" icon="pi pi-plus" class="p-button-success mr-2 custom-button" (click)="openNew()"></button>
    </ng-template>
  </p-toolbar>

<!--TABLE -->
<p-table
    #dt
    [value]="adverts"
    [globalFilterFields]="['name', 'country.name', 'representative.name']"
    [tableStyle]="{ 'min-width': '65rem' }"
    [rowHover]="true"
    dataKey="id"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [showCurrentPageReport]="true"
>

    <ng-template pTemplate="header">
      <tr>
          <th style="width: 4rem">
              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
          </th>
          <th pSortableColumn="name" style="min-width:15rem">Ad <p-sortIcon field="name"></p-sortIcon></th>
          <th pSortableColumn="price" style="min-width:15rem">Görsel <p-sortIcon field="price"></p-sortIcon></th>
          <th pSortableColumn="category" style="min-width:10rem">Açıklama <p-sortIcon field="category"></p-sortIcon></th>
          <th pSortableColumn="rating"> İlan Tarihi <p-sortIcon field="rating"></p-sortIcon></th>
          <!-- <th pSortableColumn="sutiton">Durum <p-sortIcon field="sutiton"></p-sortIcon></th> -->
          <th pSortableColumn="inventoryStatus" style="min-width:10rem">Düzenle/Sil <p-sortIcon field="inventoryStatus"></p-sortIcon></th>
          <th></th>
      </tr>
  </ng-template>


  <ng-template pTemplate="body" let-advert>
      <tr>
          <td>{{ advert.advert_no }}</td>  
          <td>{{ advert.advert_title }}</td>
          <td>
              <!-- <img [src]="'assets/images/dog.png'" width="50" class="shadow-4" /> -->
              <!--<img [src]="'assets/images/' + advert.file_name" width="50" class="shadow-4" />  -->
         </td>
          <td>{{ advert.advert_text }}</td>
          <td>{{ advert.advert_date }}</td>
          <!-- <td>{{ advert.situation }}</td> -->
          <td>
            <button (click)="onUpdate(advert.id)" pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"></button>
            <span class="button-space"></span>

            <button  (click)="openModal()" pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"></button>

            <div class="modal fade" tabindex="-1" [class.show]="modalOpen">
              <!--CSS'i düzenlemezsem çalışmaz-->
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">{{advert.advert_title}} silinecek.</h5>
                  </div>
                  <div class="modal-body">
                    <p>Silmek istediğinize emin misiniz?</p>
                  </div>
                  <div class="modal-footer">
                    <button (click)="onDelete(advert.id)" pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"> </button>
                    <button type="button" class="btn " (click)="closeModal()">İptal</button>
                  </div>
                </div>
              </div>
            </div>



            <div class="modal fade" tabindex="-1" [class.show]="modalOpenAdd">
              <!--CSS'i düzenlemezsem çalışmaz-->
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">İlan Ekle</h5>
                  </div>
                  <div class="modal-body">
                    <form  ngModelOptions="{standalone: true}">
                      <div class="row" >
                              <div class="col-6 mb-2 mt-3">
                                  <span class="p-float-label">
                                      <input name="advert_title" [(ngModel)]="advertRequest.advert_title" pInputText placeholder="Hayvan adı giriniz"  class="w-100"  style="border: solid 1px rgba(181, 181, 181, 0.267);"/>
                                      <label htmlFor="advert_title">Hayvan Adı</label>
                                  </span>   
                              </div>
                              <div class="col-6 mb-2 mt-3"  >   
                                <span class="p-float-label">
                                    <input name="advert_date" [(ngModel)]="advertRequest.advert_date" pInputText  class="w-100"  style="border: solid 1px rgba(181, 181, 181, 0.267);"/>
                                    <label htmlFor="advert_date">İlan Tarihi</label>
                                </span>  
                            </div>
                      </div>             
                      <div class="row" >
                          <div class="col-6 mb-2 mt-3" style="display: flex;" >
                            <span class="p-float-label">
                              <input name="advert_no" [(ngModel)]="advertRequest.advert_no" pInputText  class="w-100"  style="border: solid 1px rgba(181, 181, 181, 0.267);"/>
                              <label htmlFor="advert_no">İlan No</label>
                          </span>  
                          </div>   
                          <div class="col-6 mb-2 mt-3" style="display: flex;" >
                            <span class="p-float-label">
                              <input name="advert_img" [(ngModel)]="advertRequest.advert_img" pInputText  class="w-100"  style="border: solid 1px rgba(181, 181, 181, 0.267);"/>
                              <label htmlFor="advert_img">Resim yolu</label>
                          </span>  
                          </div>  
       
                      </div>

                        <div class="row" >
                        <div class="col-12 mb-2 mt-3">
                          <span class="p-float-label">
                              <textarea name="advert_text" [(ngModel)]="advertRequest.advert_text" pInputTextarea placeholder="İlan Açıklama"  class="w-100"  style="border: solid 1px rgba(181, 181, 181, 0.267);"></textarea>
                              <label htmlFor="advert_text">Açıklama</label>
                          </span>                   
                      </div>
                      </div>             
                    </form>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn" (click)="closeModalAdd()" style="width: 30%;">İptal</button>
                    <button class="btn btn-primary" type="submit" style="width: 30%;" (click)="onCreate(advertRequest)">İlan Ekle</button>
                  </div>
                </div>
              </div>
            </div>




            <!-- 
              backend'den id'yi çekemediğimiz için id'yi tespit edemedi frontend kısmında :) aklımızdao lsun. swaggerda getall'da id yi çekemedik :D
            -->
          </td> 
        </tr>
  </ng-template>

</p-table>
</div>


